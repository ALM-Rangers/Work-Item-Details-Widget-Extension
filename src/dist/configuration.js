define(["TFS/Work/RestClient","TFS/WorkItemTracking/RestClient"],function(t,i){return function(t){function i(n){if(e[n])return e[n].exports;var r=e[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){var n,r;n=[e,i,e(5),e(6)],r=function(t,i,e,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t){this.WidgetHelpers=t,this.widgetConfigurationContext=null,this.$wiid=$("#wiid"),this.client=e.getClient(),this.clientwi=n.getClient(),this.clickOnSave=!1}return t.prototype.load=function(t,i){var e=this,n=this,r=$("#wiid");this.widgetConfigurationContext=i;var o=$("#linewi .validation-error-text"),s=JSON.parse(t.customSettings.data);return s&&s.wiId?r.val(s.wiId):r.val(""),n.$wiid.blur(function(){e.clientwi.getWorkItem(r.val()).then(function(t){o.parent().css("visibility","hidden"),n.widgetConfigurationContext.notify(n.WidgetHelpers.WidgetEvent.ConfigurationChange,n.WidgetHelpers.WidgetEvent.Args(n.getCustomSettings()))},function(t){if(t.status="404")return o.text("This Work item dosn't exist."),o.parent().css("visibility","visible"),$(".btn-cta").attr("disabled","disabled"),n.WidgetHelpers.WidgetStatusHelper.Failure()})}),n.WidgetHelpers.WidgetStatusHelper.Success()},t.prototype.isValidWI=function(){var t=$.Deferred();return""!==$("#wiid").val()?this.clientwi.getWorkItem($("#wiid").val()).then(function(i){t.resolve(!0)},function(i){(i.status="404")&&t.resolve(!1)}):t.resolve(!1),t.promise()},t.prototype.getCustomSettings=function(){var t={data:JSON.stringify({wiId:$("#wiid").val()})};return t},t.prototype.onSave=function(){if(""!==$("#wiid").val()){var t=this.getCustomSettings();return this.WidgetHelpers.WidgetConfigurationSave.Valid(t)}var i=$("#linewi .validation-error-text");return i.text("This Work item Id is required"),i.parent().css("visibility","visible"),this.WidgetHelpers.WidgetConfigurationSave.Invalid()},t}();i.Configuration=r,VSS.require(["TFS/Dashboards/WidgetHelpers"],function(t){t.IncludeWidgetConfigurationStyles(),VSS.register("widetailswidget-Configuration",function(){var i=new r(t);return i}),VSS.notifyLoadSucceeded()})}.apply(i,n),!(void 0!==r&&(t.exports=r))},,,,,function(i,e){i.exports=t},function(t,e){t.exports=i}])});